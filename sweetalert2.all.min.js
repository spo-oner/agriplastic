// Находим кнопку по атрибуту data-contact-btn
const contactBtn = document.querySelector('[data-contact-btn]');

// Добавляем обработчик событий на нажатие кнопки
contactBtn.addEventListener('click', () => {

  // Создаем всплывающее окно
  Swal.fire({
    confirmButtonText: 'Отправить',
    showCancelButton: true,
    cancelButtonText: 'Отмена',
    cancelButtonColor: '#da1e35',
    title: 'Оставьте ваши данные',
    html: `<form><input type="text" id="name" class="swal2-input" placeholder="Имя" required>
           <input type="email" id="email" class="swal2-input" placeholder="E-mail">
           <input type="tel" id="number" required pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" class="swal2-input" placeholder="Телефон">

      <input class="custom-checkbox" type="checkbox" id="politic" name="politic" value="true">
      <label for="politic">Я согласен передать свои данные</label>
    </form>`,
    preConfirm: () => {
      const userName = document.getElementById('name').value
      const userEmail = document.getElementById('email').value
      const userPhone = document.getElementById('number').value
      const checkbox = document.getElementById('politic').checked
      if (!userName || !userEmail || !userPhone || !checkbox) {
        Swal.showValidationMessage(`Пожалуйста,заполните все поля и разрешите предоставление данных`)
      } else {
        const payload = {
            name: userName,
            email: userEmail,
            phone: userPhone
          };
        emailjs.send("service_jkogqsb", "template_dqaasam", payload, "tIqzEseQOrobihQN6")
          .then(
            function (response) {
              Swal.fire({
                icon: 'success',
                title: 'Данные успешно отправлены!',
                text: 'Мы свяжемся с вами как можно скорее!',
                showConfirmButton: false,
                timer: 3000,
              });
            },
            function (error) {
              Swal.fire({
                icon: 'error',
                title: 'Ошибка!',
                text: 'Не удалось отправить данные. Попробуйте позже',
              });
            }
          );
      }
    }
  });
});